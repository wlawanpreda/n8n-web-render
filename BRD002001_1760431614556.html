<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wireframe: Product Review System</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;500;600;700&family=Sarabun:wght@400;500&display=swap" rel="stylesheet">
    <style>
        /* CSS Style Guide Implementation */
        :root {
            /* Global Variables */
            --font-family-base: 'Kanit', 'Sarabun', 'Segoe UI', Tahoma, sans-serif;
            --border-radius-base: 8px;
            --border-radius-small: 4px;
            --spacing-unit: 4px;
            --transition-base: all 0.3s ease;

            /* Color Palette */
            --color-brand-primary: #ED1C24;
            --color-brand-primary-hover: #D41920;
            --color-background-gray: #F2F3F5;
            --color-background-white: #FFFFFF;
            --color-background-light-pink: #FBEAEA;
            --color-text-main: #343A40;
            --color-text-secondary: #6C757D;
            --color-text-light: #999999;
            --color-border-light: #E0E0E0;
            --color-star-rating: #FFC107;
        }

        /* Base Styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-family-base);
            background-color: var(--color-background-gray);
            color: var(--color-text-main);
            font-size: 1rem;
            line-height: 1.6;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Kanit', sans-serif;
            color: var(--color-text-main);
        }

        h1 { /* h1_page_title */
            font-size: 2rem;
            font-weight: 700;
            line-height: 1.3;
        }

        h2 { /* h2_section_title */
            font-size: 1.5rem;
            font-weight: 600;
            line-height: 1.4;
        }

        h3 { /* h3_card_title */
            font-size: 1.125rem;
            font-weight: 500;
            line-height: 1.5;
        }

        p {
            margin-bottom: 1rem;
            font-family: 'Sarabun', sans-serif;
        }
        
        a {
            color: var(--color-brand-primary);
            text-decoration: none;
            transition: var(--transition-base);
        }
        
        a:hover {
            color: var(--color-brand-primary-hover);
            text-decoration: underline;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 24px;
        }
        
        .card {
            background-color: var(--color-background-white);
            border-radius: var(--border-radius-base);
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            margin-bottom: 24px;
        }

        /* --- Components --- */
        
        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            border: none;
            border-radius: var(--border-radius-small);
            padding: 10px 24px;
            font-size: 0.9375rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition-base);
            text-align: center;
        }

        .btn-primary {
            background-color: var(--color-brand-primary);
            color: #FFFFFF;
        }
        .btn-primary:hover {
            background-color: var(--color-brand-primary-hover);
            color: #FFFFFF;
        }
        
        .btn-secondary {
            background-color: var(--color-background-light-pink);
            color: var(--color-brand-primary);
        }
        .btn-secondary:hover {
            background-color: #F5D5D5;
            color: var(--color-brand-primary);
        }

        .btn-cancel {
            background-color: transparent;
            color: var(--color-text-secondary);
            border: 1px solid var(--color-border-light);
        }
        .btn-cancel:hover {
            background-color: var(--color-background-gray);
        }
        
        .btn-delete {
            background-color: var(--color-background-light-pink);
            color: var(--color-brand-primary);
            padding: 6px 12px;
            font-size: 0.875rem;
        }
        .btn-delete:hover {
            background-color: var(--color-brand-primary);
            color: white;
        }

        /* Forms */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--color-text-main);
            margin-bottom: 6px;
        }

        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--color-border-light);
            border-radius: var(--border-radius-small);
            font-size: 0.9375rem;
            transition: var(--transition-base);
            font-family: var(--font-family-base);
        }
        .form-input:focus, .form-textarea:focus, .form-select:focus {
            border-color: var(--color-brand-primary);
            outline: none;
            box-shadow: 0 0 0 3px var(--color-background-light-pink);
        }
        .form-textarea {
            min-height: 150px;
            resize: vertical;
        }

        /* --- Layouts --- */
        .dashboard-layout {
            display: flex;
            min-height: 100vh;
        }

        .sidebar-main {
            width: 240px;
            flex-shrink: 0;
            height: 100vh;
            background-color: var(--color-background-white);
            border-right: 1px solid var(--color-border-light);
            position: fixed;
            left: 0;
            top: 0;
            padding: 24px;
        }
        
        .sidebar-main .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--color-brand-primary);
            margin-bottom: 2rem;
        }
        
        .sidebar-main .nav-menu {
            list-style: none;
        }
        
        .sidebar-main .nav-menu li a {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            border-radius: var(--border-radius-base);
            color: var(--color-text-secondary);
            font-weight: 500;
            margin-bottom: 8px;
        }
        
        .sidebar-main .nav-menu li a:hover,
        .sidebar-main .nav-menu li a.active {
            background-color: var(--color-background-light-pink);
            color: var(--color-brand-primary);
        }

        .main-content {
            margin-left: 240px;
            width: calc(100% - 240px);
            padding: 24px;
            background-color: var(--color-background-gray);
        }
        
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        /* Mock Navigation */
        .prototype-nav {
            background-color: var(--color-text-main);
            padding: 1rem;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        .prototype-nav button {
            background: var(--color-brand-primary);
            color: white;
            border: none;
            padding: 8px 16px;
            margin: 0 8px;
            border-radius: var(--border-radius-small);
            cursor: pointer;
        }
        .prototype-nav button.active {
            background-color: var(--color-background-light-pink);
            color: var(--color-brand-primary);
            font-weight: bold;
        }


        /* --- Specific Component Styles --- */
        
        /* Star Rating */
        .star-rating {
            display: flex;
            align-items: center;
            gap: 4px;
            color: var(--color-star-rating);
        }
        .star-rating .icon {
            width: 20px;
            height: 20px;
        }
        .star-rating-input {
            display: inline-flex;
            flex-direction: row-reverse;
            justify-content: flex-end;
        }
        .star-rating-input > input { display: none; }
        .star-rating-input > label {
            cursor: pointer;
            width: 32px;
            height: 32px;
            color: var(--color-border-light);
            transition: var(--transition-base);
        }
        .star-rating-input > input:checked ~ label,
        .star-rating-input > label:hover,
        .star-rating-input > label:hover ~ label {
            color: var(--color-star-rating);
        }

        /* Review Summary */
        .review-summary {
            display: flex;
            gap: 2rem;
            align-items: flex-start;
        }
        .review-summary-score {
            text-align: center;
        }
        .review-summary-score .avg-rating {
            font-size: 3rem;
            font-weight: 700;
        }
        .review-summary-distribution {
            flex-grow: 1;
        }
        .rating-bar-container {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 4px;
            font-size: 0.875rem;
            color: var(--color-text-secondary);
        }
        .rating-bar {
            flex-grow: 1;
            height: 8px;
            background-color: #E0E0E0;
            border-radius: 100px;
            overflow: hidden;
        }
        .rating-bar-fill {
            height: 100%;
            background-color: var(--color-star-rating);
        }

        /* Review Card */
        .review-card {
            border-bottom: 1px solid var(--color-border-light);
            padding: 1.5rem 0;
        }
        .review-card:last-child {
            border-bottom: none;
        }
        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.5rem;
        }
        .review-author {
            font-weight: 600;
        }
        .review-date {
            font-size: 0.875rem;
            color: var(--color-text-secondary);
        }
        .review-body p {
            margin-bottom: 1rem;
        }
        .review-images {
            display: flex;
            gap: 12px;
            margin-top: 1rem;
        }
        .review-image-placeholder {
            width: 80px;
            height: 80px;
            background-color: #E0E0E0;
            border-radius: var(--border-radius-small);
            cursor: pointer;
            transition: var(--transition-base);
        }
        .review-image-placeholder:hover {
            background-color: #cccccc;
        }
        
        .merchant-reply {
            background-color: var(--color-background-gray);
            border-left: 4px solid var(--color-brand-primary);
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 0 var(--border-radius-small) var(--border-radius-small) 0;
        }
        .merchant-reply .reply-header {
            font-weight: 600;
            color: var(--color-text-main);
        }
        
        .inline-reply-form {
            margin-top: 1rem;
            display: none; /* Hidden by default */
        }
        
        /* Image Upload */
        .image-uploader {
            border: 2px dashed var(--color-border-light);
            border-radius: var(--border-radius-base);
            padding: 24px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition-base);
        }
        .image-uploader:hover {
            border-color: var(--color-brand-primary);
            background-color: var(--color-background-light-pink);
        }
        .image-uploader-icon {
             font-size: 2rem;
             color: var(--color-text-light);
             margin-bottom: 0.5rem;
        }
        .image-thumbnails {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }
        .thumbnail {
            width: 100px;
            height: 100px;
            background-color: #E0E0E0;
            border-radius: var(--border-radius-small);
            position: relative;
        }
        .thumbnail-remove {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--color-brand-primary);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: bold;
            border: 2px solid white;
        }

        /* Dashboard Table */
        .data-table-wrapper {
            overflow-x: auto;
        }
        .data-table {
            width: 100%;
            border-collapse: collapse;
            background-color: var(--color-background-white);
        }
        .data-table th, .data-table td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid var(--color-border-light);
            vertical-align: middle;
        }
        .data-table thead th {
            background-color: var(--color-background-gray);
            font-weight: 600;
            font-size: 0.875rem;
            color: var(--color-text-secondary);
        }
        .data-table tbody tr:hover {
            background-color: var(--color-background-light-pink);
        }
        .action-icons .icon-btn {
            color: var(--color-text-secondary);
            cursor: pointer;
            transition: var(--transition-base);
            padding: 4px;
        }
        .action-icons .icon-btn:hover {
            color: var(--color-brand-primary);
        }
        
        .status-badge {
            padding: 4px 8px;
            border-radius: var(--border-radius-small);
            font-size: 0.75rem;
            font-weight: 600;
        }
        .status-badge.normal {
            background-color: #E9F7EF;
            color: #2ECC71;
        }
        .status-badge.flagged {
            background-color: #FEF3E8;
            color: #F39C12;
        }
        
        .d-none { display: none !important; }

    </style>
</head>
<body>
    
    <!-- This nav is for prototype demonstration purposes only -->
    <nav class="prototype-nav">
        <button id="nav-customer" onclick="showPage('product-detail-page', this)">Customer View</button>
        <button id="nav-merchant" onclick="showPage('merchant-dashboard', this)">Merchant View</button>
        <button id="nav-admin" onclick="showPage('admin-dashboard', this)">Admin View</button>
    </nav>
    
    <!-- SVG Icons Definition -->
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
        <symbol id="icon-star" viewBox="0 0 24 24"><path fill="currentColor" d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></symbol>
        <symbol id="icon-plus" viewBox="0 0 24 24"><path fill="currentColor" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></symbol>
        <symbol id="icon-edit" viewBox="0 0 24 24"><path fill="currentColor" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83l3.75 3.75l1.83-1.83z"/></symbol>
        <symbol id="icon-delete" viewBox="0 0 24 24"><path fill="currentColor" d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></symbol>
        <symbol id="icon-reply" viewBox="0 0 24 24"><path fill="currentColor" d="M10 9V5l-7 7l7 7v-4.1c5 0 8.5 1.6 11 5.1c-1-5-4-10-11-11z"/></symbol>
        <symbol id="icon-bell" viewBox="0 0 24 24"><path fill="currentColor" d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></symbol>
        <symbol id="icon-dashboard" viewBox="0 0 24 24"><path fill="currentColor" d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/></symbol>
        <symbol id="icon-reviews" viewBox="0 0 24 24"><path fill="currentColor" d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-6 12H6v-2h8v2zm4-3H6V9h12v2zm0-3H6V6h12v2z"/></symbol>
        <symbol id="icon-settings" viewBox="0 0 24 24"><path fill="currentColor" d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5s3.5 1.57 3.5 3.5s-1.57 3.5-3.5 3.5z"/></symbol>
    </svg>

    <!-- PAGE 1: Product Detail Page -->
    <div id="product-detail-page" class="page">
        <div class="container">
            <h1>รายละเอียดสินค้า: สมาร์ทโฟนรุ่นใหม่</h1>
            <div class="card product-info">
                 <p>นี่คือพื้นที่สำหรับรายละเอียดสินค้า, รูปภาพ, และปุ่มสั่งซื้อ...</p>
            </div>
            
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <h2>รีวิวสินค้า (125)</h2>
                    <button class="btn btn-primary" onclick="showPage('write-review-page')">
                        <svg class="icon" width="18" height="18" fill="currentColor"><use href="#icon-edit"></use></svg>
                        เขียนรีวิว
                    </button>
                </div>
                
                <!-- Review Summary -->
                <div class="review-summary">
                    <div class="review-summary-score">
                        <div class="avg-rating">4.8</div>
                        <div class="star-rating">
                           <svg class="icon"><use href="#icon-star"></use></svg>
                           <svg class="icon"><use href="#icon-star"></use></svg>
                           <svg class="icon"><use href="#icon-star"></use></svg>
                           <svg class="icon"><use href="#icon-star"></use></svg>
                           <svg class="icon" style="color:#E0E0E0;"><use href="#icon-star"></use></svg>
                        </div>
                        <div class="total-reviews" style="font-size: 0.875rem; color: var(--color-text-secondary);">จาก 125 รีวิว</div>
                    </div>
                    <div class="review-summary-distribution">
                         <div class="rating-bar-container">
                             <span>5 ดาว</span>
                             <div class="rating-bar"><div class="rating-bar-fill" style="width: 85%;"></div></div>
                             <span>107</span>
                         </div>
                         <div class="rating-bar-container">
                             <span>4 ดาว</span>
                             <div class="rating-bar"><div class="rating-bar-fill" style="width: 10%;"></div></div>
                             <span>12</span>
                         </div>
                         <div class="rating-bar-container">
                             <span>3 ดาว</span>
                             <div class="rating-bar"><div class="rating-bar-fill" style="width: 3%;"></div></div>
                             <span>4</span>
                         </div>
                         <div class="rating-bar-container">
                             <span>2 ดาว</span>
                             <div class="rating-bar"><div class="rating-bar-fill" style="width: 1%;"></div></div>
                             <span>1</span>
                         </div>
                         <div class="rating-bar-container">
                             <span>1 ดาว</span>
                             <div class="rating-bar"><div class="rating-bar-fill" style="width: 1%;"></div></div>
                             <span>1</span>
                         </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div style="display: flex; justify-content: flex-end; align-items: center; margin-bottom: 1rem;">
                    <label for="sort-reviews" class="form-label" style="margin: 0 8px 0 0;">จัดเรียงตาม:</label>
                    <select id="sort-reviews" class="form-select" style="width: auto;">
                        <option>ใหม่ล่าสุด</option>
                        <option>คะแนนสูงสุดไปต่ำสุด</option>
                        <option>คะแนนต่ำสุดไปสูงสุด</option>
                    </select>
                </div>
                
                <!-- Reviews List -->
                <div id="review-list-container">
                    <!-- My Review (with Edit/Delete) -->
                    <div class="review-card" id="my-review-card">
                        <div class="review-header">
                            <div>
                                <div class="star-rating">
                                    <svg class="icon"><use href="#icon-star"></use></svg><svg class="icon"><use href="#icon-star"></use></svg><svg class="icon"><use href="#icon-star"></use></svg><svg class="icon"><use href="#icon-star"></use></svg><svg class="icon"><use href="#icon-star"></use></svg>
                                </div>
                                <div class="review-author">คุณ (สมชาย ใจดี)</div>
                                <div class="review-date">15 สิงหาคม 2567</div>
                            </div>
                            <div class="review-actions">
                                <button class="btn btn-secondary btn-sm" onclick="showPage('write-review-page')">แก้ไข</button>
                                <button class="btn btn-cancel btn-sm" onclick="document.getElementById('my-review-card').remove()">ลบ</button>
                            </div>
                        </div>
                        <div class="review-body">
                            <p>สินค้าดีมากๆ เลยครับ จัดส่งไว แพ็คมาอย่างดี วัสดุพรีเมี่ยม กล้องสวยถูกใจมากครับ</p>
                            <div class="review-images">
                                <div class="review-image-placeholder" onclick="alert('View large image 1')"></div>
                                <div class="review-image-placeholder" onclick="alert('View large image 2')"></div>
                            </div>
                        </div>
                    </div>
                    <!-- Review with Merchant Reply -->
                    <div class="review-card">
                        <div class="review-header">
                            <div>
                                <div class="star-rating">
                                    <svg class="icon"><use href="#icon-star"></use></svg><svg class="icon"><use href="#icon-star"></use></svg><svg class="icon"><use href="#icon-star"></use></svg><svg class="icon"><use href="#icon-star"></use></svg><svg class="icon"><use href="#icon-star"></use></svg>
                                </div>
                                <div class="review-author">กนกวรรณ</div>
                                <div class="review-date">10 สิงหาคม 2567</div>
                            </div>
                        </div>
                        <div class="review-body">
                            <p>ประทับใจมากค่ะ สินค้าตรงปกทุกอย่างเลย ร้านค้าบริการดีมาก ตอบแชทเร็วด้วยค่ะ</p>
                            <div class="merchant-reply">
                                <div class="reply-header">คำตอบกลับจากร้านค้า:</div>
                                <p style="margin: 0.5rem 0 0 0;">ขอบคุณสำหรับรีวิวนะคะ! ทางร้านดีใจที่คุณลูกค้าชอบสินค้าของเราค่ะ หวังว่าจะได้ให้บริการอีกในโอกาสหน้านะคะ</p>
                            </div>
                        </div>
                    </div>
                    <!-- Standard Review -->
                    <div class="review-card">
                        <div class="review-header">
                            <div>
                                <div class="star-rating">
                                    <svg class="icon"><use href="#icon-star"></use></svg><svg class="icon"><use href="#icon-star"></use></svg><svg class="icon"><use href="#icon-star"></use></svg><svg class="icon"><use href="#icon-star"></use></svg><svg class="icon" style="color:#E0E0E0;"><use href="#icon-star"></use></svg>
                                </div>
                                <div class="review-author">พีรพล</div>
                                <div class="review-date">5 สิงหาคม 2567</div>
                            </div>
                        </div>
                        <div class="review-body">
                            <p>โดยรวมถือว่าโอเคครับ แต่ติดเรื่องการจัดส่งที่ช้าไปหน่อยนึงครับ</p>
                             <div class="review-images">
                                <div class="review-image-placeholder" onclick="alert('View large image 3')"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- PAGE 2: Write Review Page -->
    <div id="write-review-page" class="page d-none">
         <div class="container" style="max-width: 800px;">
            <div class="card">
                <h1>เขียนรีวิวสำหรับ "สมาร์ทโฟนรุ่นใหม่"</h1>
                <p>แบ่งปันประสบการณ์ของคุณเพื่อช่วยให้ลูกค้ารายอื่นตัดสินใจได้ง่ายขึ้น</p>

                <form id="review-form" onsubmit="submitReview(event)">
                    <div class="form-group">
                        <label class="form-label">คะแนนโดยรวม</label>
                        <div class="star-rating-input">
                            <input type="radio" id="star5" name="rating" value="5" required><label for="star5" title="5 stars"><svg><use href="#icon-star"></use></svg></label>
                            <input type="radio" id="star4" name="rating" value="4"><label for="star4" title="4 stars"><svg><use href="#icon-star"></use></svg></label>
                            <input type="radio" id="star3" name="rating" value="3"><label for="star3" title="3 stars"><svg><use href="#icon-star"></use></svg></label>
                            <input type="radio" id="star2" name="rating" value="2"><label for="star2" title="2 stars"><svg><use href="#icon-star"></use></svg></label>
                            <input type="radio" id="star1" name="rating" value="1"><label for="star1" title="1 star"><svg><use href="#icon-star"></use></svg></label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="review-text" class="form-label">รายละเอียดรีวิว</label>
                        <textarea id="review-text" class="form-textarea" placeholder="สินค้าเป็นอย่างไร? คุณชอบหรือไม่ชอบอะไร?" maxlength="500" required oninput="updateCharCount(this)"></textarea>
                        <div id="char-counter" style="text-align: right; font-size: 0.875rem; color: var(--color-text-light); margin-top: 4px;">0/500</div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">เพิ่มรูปภาพ (สูงสุด 3 รูป)</label>
                        <div class="image-uploader" onclick="addImageThumbnail()">
                            <div class="image-uploader-icon"><svg width="32" height="32" fill="currentColor"><use href="#icon-plus"></use></svg></div>
                            <div>เพิ่มรูปภาพ</div>
                        </div>
                        <div id="image-thumbnail-container" class="image-thumbnails">
                            <!-- Thumbnails will be added here by JS -->
                        </div>
                    </div>
                    
                    <div style="display: flex; justify-content: flex-end; gap: 1rem; margin-top: 2rem;">
                         <button type="button" class="btn btn-cancel" onclick="showPage('product-detail-page')">ยกเลิก</button>
                         <button type="submit" class="btn btn-primary">ส่งรีวิว</button>
                    </div>
                </form>
            </div>
         </div>
    </div>
    
    <!-- PAGE 3: Merchant Review Dashboard -->
    <div id="merchant-dashboard" class="page d-none">
        <div class="dashboard-layout">
            <aside class="sidebar-main">
                <div class="logo">Merchant</div>
                <ul class="nav-menu">
                    <li><a href="#" class="active"><svg width="20" height="20" fill="currentColor"><use href="#icon-dashboard"></use></svg> แดชบอร์ด</a></li>
                    <li><a href="#"><svg width="20" height="20" fill="currentColor"><use href="#icon-reviews"></use></svg> จัดการรีวิว</a></li>
                </ul>
            </aside>
            <main class="main-content">
                <div class="page-header">
                    <h1>ภาพรวมรีวิว</h1>
                     <div class="action-icons" style="gap: 1.5rem">
                         <span style="font-size: 0.9rem;">ร้าน Smart Gadget</span>
                         <div class="icon-btn" style="position:relative;">
                             <svg width="24" height="24" fill="currentColor"><use href="#icon-bell"></use></svg>
                             <span style="position:absolute; top:-4px; right:-8px; background: var(--color-brand-primary); color:white; font-size:10px; border-radius:50%; width:18px; height:18px; display:flex; align-items:center; justify-content:center; border:2px solid white;">3</span>
                         </div>
                     </div>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 24px; margin-bottom: 24px;">
                    <div class="card">
                        <h3>คะแนนเฉลี่ย</h3>
                        <div style="font-size: 2rem; font-weight: 700; color: var(--color-brand-primary);">4.7</div>
                    </div>
                    <div class="card">
                        <h3>รีวิวทั้งหมด</h3>
                        <div style="font-size: 2rem; font-weight: 700;">1,280</div>
                    </div>
                    <div class="card">
                        <h3>รีวิวที่ยังไม่ตอบ</h3>
                        <div style="font-size: 2rem; font-weight: 700;">3</div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>รีวิวล่าสุด</h3>
                    
                    <!-- Merchant Review Item -->
                    <div class="review-card">
                        <div class="review-header">
                            <div>
                                <div class="star-rating">
                                    <svg class="icon"><use href="#icon-star"></use></svg><svg class="icon"><use href="#icon-star"></use></svg><svg class="icon"><use href="#icon-star"></use></svg><svg class="icon"><use href="#icon-star"></use></svg><svg class="icon" style="color:#E0E0E0;"><use href="#icon-star"></use></svg>
                                </div>
                                <div><span class="review-author">จิรวัฒน์</span> บนสินค้า <a href="#">สมาร์ทโฟนรุ่นใหม่</a></div>
                                <div class="review-date">18 สิงหาคม 2567</div>
                            </div>
                        </div>
                        <div class="review-body">
                            <p>ใช้ดีครับ แต่แบตหมดเร็วกว่าที่คิดไปหน่อย</p>
                            <button class="btn btn-secondary" onclick="toggleReplyForm(this)">
                                <svg width="18" height="18" fill="currentColor"><use href="#icon-reply"></use></svg>
                                ตอบกลับ
                            </button>
                            <div class="inline-reply-form">
                                <textarea class="form-textarea" placeholder="พิมพ์คำตอบของคุณ..."></textarea>
                                <div style="text-align: right; margin-top: 8px;">
                                    <button class="btn btn-primary btn-sm">ส่งคำตอบ</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Merchant Review Item (already replied) -->
                     <div class="review-card">
                        <div class="review-header">
                            <div>
                                <div class="star-rating">
                                    <svg class="icon"><use href="#icon-star"></use></svg><svg class="icon"><use href="#icon-star"></use></svg><svg class="icon"><use href="#icon-star"></use></svg><svg class="icon"><use href="#icon-star"></use></svg><svg class="icon"><use href="#icon-star"></use></svg>
                                </div>
                                <div><span class="review-author">กนกวรรณ</span> บนสินค้า <a href="#">สมาร์ทโฟนรุ่นใหม่</a></div>
                                <div class="review-date">10 สิงหาคม 2567</div>
                            </div>
                        </div>
                        <div class="review-body">
                            <p>ประทับใจมากค่ะ สินค้าตรงปกทุกอย่างเลย ร้านค้าบริการดีมาก ตอบแชทเร็วด้วยค่ะ</p>
                             <div class="merchant-reply">
                                <div class="reply-header">คุณตอบกลับว่า:</div>
                                <p style="margin: 0.5rem 0 0 0;">ขอบคุณสำหรับรีวิวนะคะ! ทางร้านดีใจที่คุณลูกค้าชอบสินค้าของเราค่ะ หวังว่าจะได้ให้บริการอีกในโอกาสหน้านะคะ</p>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <!-- PAGE 4: Admin Management Dashboard -->
    <div id="admin-dashboard" class="page d-none">
        <div class="dashboard-layout">
            <aside class="sidebar-main">
                <div class="logo">Admin Panel</div>
                <ul class="nav-menu">
                    <li><a href="#"><svg width="20" height="20" fill="currentColor"><use href="#icon-dashboard"></use></svg> แดชบอร์ด</a></li>
                    <li><a href="#" class="active"><svg width="20" height="20" fill="currentColor"><use href="#icon-reviews"></use></svg> จัดการรีวิว</a></li>
                    <li><a href="#"><svg width="20" height="20" fill="currentColor"><use href="#icon-settings"></use></svg> ตั้งค่าระบบ</a></li>
                </ul>
            </aside>
            <main class="main-content">
                 <div class="page-header">
                    <h1>จัดการรีวิวทั้งหมด</h1>
                    <button class="btn btn-primary">Export ข้อมูล (CSV)</button>
                </div>
                
                 <div class="card" style="margin-bottom: 24px;">
                     <h3>จัดการคำต้องห้าม (AI Filter)</h3>
                     <div style="display: flex; gap: 1rem; align-items: flex-end;">
                        <div class="form-group" style="flex-grow: 1; margin-bottom: 0;">
                            <label for="banned-word" class="form-label">เพิ่มคำใหม่</label>
                            <input type="text" id="banned-word" class="form-input" placeholder="เช่น คำหยาบ, สแปม">
                        </div>
                        <button class="btn btn-secondary">เพิ่ม</button>
                     </div>
                 </div>

                <div class="card">
                     <div class="data-table-wrapper">
                         <table class="data-table">
                             <thead>
                                 <tr>
                                     <th>สินค้า</th>
                                     <th>ผู้รีวิว</th>
                                     <th>เนื้อหา</th>
                                     <th>สถานะ</th>
                                     <th>Actions</th>
                                 </tr>
                             </thead>
                             <tbody>
                                 <tr>
                                     <td>สมาร์ทโฟนรุ่นใหม่</td>
                                     <td>จิรวัฒน์</td>
                                     <td>ใช้ดีครับ แต่แบตหมดเร็ว...</td>
                                     <td><span class="status-badge normal">ปกติ</span></td>
                                     <td class="action-icons">
                                         <a href="#" class="icon-btn" title="ตรวจสอบรายละเอียด">...</a>
                                         <a href="#" class="icon-btn" title="ลบรีวิว" onclick="this.closest('tr').remove()"><svg width="20" height="20" fill="currentColor"><use href="#icon-delete"></use></svg></a>
                                     </td>
                                 </tr>
                                 <tr>
                                     <td>หูฟังไร้สาย Pro</td>
                                     <td>testuser01</td>
                                     <td>โฆษณาเว็บพนันออนไลน์...</td>
                                     <td><span class="status-badge flagged">AI กรอง</span></td>
                                     <td class="action-icons">
                                         <a href="#" class="icon-btn" title="ตรวจสอบรายละเอียด">...</a>
                                         <a href="#" class="icon-btn" title="ลบรีวิว" onclick="this.closest('tr').remove()"><svg width="20" height="20" fill="currentColor"><use href="#icon-delete"></use></svg></a>
                                     </td>
                                 </tr>
                                 <tr>
                                     <td>สมาร์ทโฟนรุ่นใหม่</td>
                                     <td>กนกวรรณ</td>
                                     <td>ประทับใจมากค่ะ...</td>
                                     <td><span class="status-badge normal">ปกติ</span></td>
                                     <td class="action-icons">
                                         <a href="#" class="icon-btn" title="ตรวจสอบรายละเอียด">...</a>
                                         <a href="#" class="icon-btn" title="ลบรีวิว" onclick="this.closest('tr').remove()"><svg width="20" height="20" fill="currentColor"><use href="#icon-delete"></use></svg></a>
                                     </td>
                                 </tr>
                             </tbody>
                         </table>
                     </div>
                </div>
            </main>
        </div>
    </div>
    
    <script>
        const pages = document.querySelectorAll('.page');
        const navButtons = document.querySelectorAll('.prototype-nav button');
        let currentImageCount = 0;
        const MAX_IMAGES = 3;

        function showPage(pageId, navButton) {
            pages.forEach(page => {
                page.classList.add('d-none');
            });
            document.getElementById(pageId).classList.remove('d-none');
            
            if (navButton) {
                 navButtons.forEach(btn => btn.classList.remove('active'));
                 navButton.classList.add('active');
            } else {
                // If called without a main nav button (e.g., from "write review"), sync the main nav
                navButtons.forEach(btn => btn.classList.remove('active'));
                if (pageId.includes('product-detail') || pageId.includes('write-review')) {
                    document.getElementById('nav-customer').classList.add('active');
                } else if (pageId.includes('merchant')) {
                     document.getElementById('nav-merchant').classList.add('active');
                } else if (pageId.includes('admin')) {
                     document.getElementById('nav-admin').classList.add('active');
                }
            }
        }
        
        function updateCharCount(textarea) {
            const counter = document.getElementById('char-counter');
            counter.textContent = `${textarea.value.length}/${textarea.maxLength}`;
        }
        
        function addImageThumbnail() {
            if (currentImageCount >= MAX_IMAGES) {
                alert(`คุณสามารถอัปโหลดได้สูงสุด ${MAX_IMAGES} รูป`);
                return;
            }
            currentImageCount++;
            const container = document.getElementById('image-thumbnail-container');
            const thumb = document.createElement('div');
            thumb.className = 'thumbnail';
            const removeBtn = document.createElement('div');
            removeBtn.className = 'thumbnail-remove';
            removeBtn.innerHTML = '&times;';
            removeBtn.onclick = function(e) {
                e.stopPropagation();
                thumb.remove();
                currentImageCount--;
            };
            thumb.appendChild(removeBtn);
            container.appendChild(thumb);
        }

        function submitReview(event) {
            event.preventDefault();
            const ratingValue = document.querySelector('input[name="rating"]:checked').value;
            const reviewText = document.getElementById('review-text').value;

            // Create star icons HTML
            let starsHTML = '';
            for (let i = 0; i < 5; i++) {
                starsHTML += `<svg class="icon" ${i >= ratingValue ? 'style="color:#E0E0E0;"' : ''}><use href="#icon-star"></use></svg>`;
            }
            
            // Create image placeholders HTML
            let imagesHTML = '';
            if (currentImageCount > 0) {
                imagesHTML += '<div class="review-images">';
                for(let i=0; i<currentImageCount; i++) {
                    imagesHTML += `<div class="review-image-placeholder" onclick="alert('View new image ${i+1}')"></div>`;
                }
                imagesHTML += '</div>';
            }


            const newReviewHTML = `
                <div class="review-card" style="background-color: var(--color-background-light-pink);">
                    <div class="review-header">
                        <div>
                            <div class="star-rating">${starsHTML}</div>
                            <div class="review-author">คุณ (สมชาย ใจดี)</div>
                            <div class="review-date">เมื่อสักครู่</div>
                        </div>
                    </div>
                    <div class="review-body">
                        <p>${reviewText.replace(/\n/g, '<br>')}</p>
                        ${imagesHTML}
                    </div>
                </div>
            `;

            const reviewListContainer = document.getElementById('review-list-container');
            reviewListContainer.insertAdjacentHTML('afterbegin', newReviewHTML);
            
            // Reset form
            document.getElementById('review-form').reset();
            document.getElementById('image-thumbnail-container').innerHTML = '';
            currentImageCount = 0;
            updateCharCount(document.getElementById('review-text'));

            // Go back to product page
            showPage('product-detail-page');
            window.scrollTo(0, 0); // Scroll to top to see the new review
        }
        
        function toggleReplyForm(button) {
            const form = button.nextElementSibling;
            if (form.style.display === 'block') {
                form.style.display = 'none';
                button.innerHTML = '<svg width="18" height="18" fill="currentColor"><use href="#icon-reply"></use></svg> ตอบกลับ';
            } else {
                form.style.display = 'block';
                button.innerHTML = 'ยกเลิก';
            }
        }
        
        // Initial page load
        document.addEventListener('DOMContentLoaded', () => {
            showPage('product-detail-page', document.getElementById('nav-customer'));
        });
    </script>

</body>
</html>
